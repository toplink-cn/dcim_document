# 自定义命令集

## 简介

自定义命令集，分为交换机命令集和路由器命令集。

:::note **交换机命令集**

便于快速上架多台交换机，进行初始化配置，同时便于dcim使用者，进行二次开发，可以通过此功能进行交换机配置的修改和提交。

:::

:::note **路由器命令集**

是实现自主路由的必要条件，使用者需要先设置添加&删除静态路由命令集和添加&删除直连路由命令集，以及查询路由命令集。因为这些是执行自主路由所必须的内容。

:::

## 添加命令集

DCIM导航栏>>网络管理>>自定义命令集>>添加  

添加命令集可以进行添加交换机命令集，也可以添加路由命令集，以下教程以添加路由器命令集作为示例。  

添加路由命令集的详情如下所示，在类型中选择路由操作命令集。 

![](./img/network%20custom%2000.png)

 
:::tip **字段详解**  

**名称：**设置命令集的名称，如果是路由命令集则可设置详细些，如添加直连路由命令集。  
**类型：**可选交换机命令集或者路由操作命令集。上图中选择的是路由操作命令集。  
**命令内容：**填写操作路由时，所执行的所有命令内容。同时可引用一定的变量，便于生成想要的命令内容。  
**变量：**服务器关联的端口vlan号 *{$server_vlan}*     待分配IP段带掩码 *{$server_ip_block_cidr}*       待分配IP段网关带掩码  *{$server_ip_block_gateway_cidr}*       服务器主IP *{$server_main_ip}*     这些变量是路由操作时所需要的量，可以直接在**[命令内容]**中进行引入。  
**关联设设备：**因为选择的是**[路由操作命令集]**，所以关联设备则需要选择已经开启网关设备的网络设备。  
**路由属性：**可以下拉选择不同的路由属性如“添加直连路由”，**[添加静态路由]**”等。  

:::


## 应用命令集

### 应用交换机命令集  

应用交换机命令集之前应当已经设置完成了交换机命令集，并关联了对应交换机设备、具体如图所示。

![](./img/network%20custom%2001.png)

DCIM导航栏>>设备管理>>交换机管理>>xx交换机>>命令集

命令集进行应用时，需要在交换机管理进行应用，同时进行填充变量值即可。如下图所示。  



![](./img/network%20custom%2002.png)

### 应用路由器命令集  

DCIM导航栏>>设备管理>>交换机管理>>xx设备>>修改

当核心路由设备已经开启“网关设备”关联了指定的ip段，并且预设路由命令集具体如下图所示。  

![](./img/network%20custom%2003.png)

设置完成之后在服务器分配ip时，则会提示路由选项操作，如下图所示

![](./img/network%20custom%2004.png)


![](./img/network%20custom%2005.png)




